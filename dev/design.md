# 設計情報

徒然なるままに設計情報をメモる。

## import対応
* import文の書式
```
import "relative_path.sad"
```


* exprからの参照方法

  * 参照元
    ```
    expr or(c37ubbvxn5azfhhh4j5ocz657y, 10, 20)
    ```
  * 参照先
    ```
    [35] 第三者は物理的に金庫にアクセスできる
        根拠  そもそも金庫というものは
             物理的なアクセスができる攻撃者から内容物を守るためのものである。
        uuid  c37ubbvxn5azfhhh4j5ocz657y
        expr  true
    ```


* uuid はBase32 `[a-z2-7=]` の26文字で、英文字は小文字に限定
  * Base64にした場合は22文字に縮められるが大文字小文字を区別しなければならなくなる
  * 扱いやすさを優先してBase32にしている


* uuidにこだわる理由
  * 別のやり方として参照方法を（ファイル名、ローカルID）とする方法がある
  * この方法だとファイル内の部品ツリーをカット＆ペーストして他のファイルに移動したときに、
    参照元のすべてで（ファイル名、ローカルID）を変更する必要が出てしまう
  * 一方uuidによる参照であれば、どのファイルに部品ツリーが移動しても参照関係は維持される


* import で取り込んだ他ファイルのノード群を表示するときの[]内のID表現は？
  * import "filename.sad" as PREFIX も考えたけど、ちょっとシンプルじゃないのでねぇ
  * ひとまず簡単に以下でやってみる
    * labelがある場合 -> `[label]`
    * uuidがある場合 -> `[uuidの先頭4文字]`
    * それ以外 -> `[-]`
